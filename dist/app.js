(()=>{"use strict";class e{constructor(){this.tasks=[{id:1,title:"Important 1",details:"Details",dueDate:"2023-09-04",priorityLevel:3},{id:2,title:"Important 2",details:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Recusandae molestias odit vel deserunt.",dueDate:"2023-09-04",priorityLevel:1},{id:3,title:"Mid Important",details:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Recusandae molestias odit vel deserunt.",dueDate:"2023-09-07",priorityLevel:2},{id:4,title:"Low Important",details:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Recusandae molestias odit vel deserunt.",dueDate:"2023-09-04",priorityLevel:3}],this.nextId=1}addTask(e){const t={id:this.nextId++,title:e.title,details:e.details,dueDate:e.dueDate,priorityLevel:e.priority};this.tasks.push(t)}showTask(e,t){return e[t]}removeTask(e,t){const a=this.tasks.findIndex((e=>e.id==t)),s=e.findIndex((e=>e.id==t));this.tasks.splice(a,1),e.splice(s,1)}filterTask(e){const t=new Date,a=new Date;switch(a.setDate((new Date).getDate()+7),e){case"today":return this.tasks.filter((e=>e.dueDate==this.formatDate(t)));case"week":return this.tasks.filter((e=>e.dueDate>=this.formatDate(t)&&e.dueDate<=this.formatDate(a)));case"important":return this.tasks.filter((e=>1==e.priorityLevel));case"all":return this.tasks;default:return this.getTasks()}}formatDate(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}getTasks(){return this.tasks}}class t{constructor(e){this.name=e,this.projects=[],this.nextId=1}addProject(e){const t={id:this.nextId++,name:e.projectName,tasks:[]};this.projects.push(t)}taskToProject(e,t){const a=this.projects.findIndex((t=>t.id==e));return this.projects[a].tasks.push(t),this.projects[a]}showProject(e){const t=this.projects.findIndex((t=>t.id==e));return this.projects[t]}getProjects(){return this.projects}}const a=(()=>{const a=document.getElementById("btn-add"),s=document.getElementById("btn-project"),i=document.querySelector(".btn-close"),n=document.getElementById("btnProj-close"),d=document.getElementById("formDialog"),r=document.getElementById("projectDialog"),o=document.getElementById("detailsDialog"),c=document.getElementById("task-content"),l=document.querySelector(".projects-container"),u=document.getElementById("details-info"),m=document.getElementById("task-input"),p=document.querySelectorAll(".side-items"),v=new e,g=v.getTasks(),k=new t;let f="";function E(e){let t="";c.innerHTML="",e.forEach(((e,a)=>{t+=`<div class="task">\n\n            <p class="task-name">${e.title}</p>\n\n            <p class="task-details task-detail" data-index="${a}">Details</p>\n            <i class="fa-regular fa-pen-to-square task-item__controls task-edit" data-index="${a}"></i>\n            <i class="fa-solid fa-trash-can task-item__controls task-delete" data-id="${e.id}"></i>\n        </div>`})),c.innerHTML=t;const a=document.querySelectorAll(".task-detail"),s=document.querySelectorAll(".task-delete");a.forEach((t=>{t.addEventListener("click",(t=>{const a=t.target.getAttribute("data-index");!function(e,t){u.innerHTML="";const a=document.createElement("div");let s=v.showTask(e,t);a.innerHTML=`<div class="flex project-header">\n                <h3>${s.title}</h3>\n                <div>${s.dueDate}</div>\n            </div>\n            <div>\n                ${s.details}\n            </div>\n        `,u.append(a),u.addEventListener("click",(()=>{o.classList.remove("active")}))}(e,a),o.classList.add("active")}))})),s.forEach((t=>{t.addEventListener("click",(t=>{const a=t.target.getAttribute("data-id");v.removeTask(e,a),E(e)}))}))}function h(e){let t="";l.innerHTML="",e.forEach((e=>{t+=`<div class="flex project-item" data-id="${e.id}">\n            <i class="fa-regular fa-folder"></i>\n            <p>${e.name}</p>\n        </div>`})),l.innerHTML=t,document.querySelectorAll(".project-item").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.getAttribute("data-id");let a=k.showProject(t);f=a.id,y(a)}))}))}function y(e){e.name;let t=e.tasks;c.innerHTML="";let a=`<div class="project">\n            <div class="flex project-header">\n                <div class="flex">\n                    <i class="fa-regular fa-folder"></i>\n                    <h2>${e.name}</h2>\n                </div>\n                <button class="project-task btn-create" id="project-task"> Add Task</button>\n            </div>\n        </div>`;c.innerHTML=a,t.forEach(((e,t)=>{const a=document.createElement("div");a.innerHTML=`<div class="task">\n                <p class="task-name">${e.title}</p>\n                <p class="task-details task-detail" data-index="${t}">Details</p>\n                <i class="fa-regular fa-pen-to-square task-item__controls task-edit" data-index="${t}"></i>\n                <i class="fa-solid fa-trash-can task-item__controls task-delete" data-id="${e.id}"></i>\n            </div>`,c.appendChild(a)}));const s=document.getElementById("project-task"),i=document.getElementById("projectDialog");s.addEventListener("click",(()=>{i.classList.toggle("active")}))}return m.addEventListener("submit",(e=>{e.preventDefault();const t={title:document.getElementById("proj-title").value,details:document.getElementById("proj-details").value,dueDate:document.getElementById("proj-dueDate").value,priority:document.getElementById("proj-priority").value};y(k.taskToProject(f,t)),document.getElementById("proj-title").value="",document.getElementById("proj-details").value="",document.getElementById("proj-dueDate").value="",document.getElementById("proj-priority").value=1,r.classList.remove("active")})),p.forEach((e=>{e.addEventListener("click",(t=>{p.forEach((e=>{e.classList.remove("active")}));const a=t.target.getAttribute("data-title");let s=v.filterTask(a);e.classList.toggle("active"),E(s)}))})),a.addEventListener("click",(()=>{d.classList.toggle("active")})),i.addEventListener("click",(()=>{d.classList.toggle("active")})),n.addEventListener("click",(()=>{r.classList.toggle("active")})),s.addEventListener("click",(()=>{if(!s.classList.contains("active")){const e=document.createElement("div");e.classList.add("flex");let t="";t+='<form autocomplete="off" class="flex" id="form-project">\n                <input type="text" name="" id="project_name" placeholder="New Project" required>\n                <button type="submit" class="btn-create">Add</button>\n            </form>',e.innerHTML=t,l.prepend(e),document.getElementById("project_name").focus(),s.classList.add("active"),document.getElementById("form-project").addEventListener("submit",(e=>{e.preventDefault();const t={projectName:document.getElementById("project_name").value};k.addProject(t),s.classList.remove("active"),h(k.getProjects())}))}})),d.addEventListener("submit",(e=>{e.preventDefault();const t={title:document.getElementById("title").value,details:document.getElementById("details").value,dueDate:document.getElementById("dueDate").value,priority:document.getElementById("priority").value};v.addTask(t),document.getElementById("title").value="",document.getElementById("details").value="",document.getElementById("dueDate").value="",document.getElementById("priority").value="1",E(g),d.classList.toggle("active")})),{renderTasks:E,renderProjects:h}})();document.addEventListener("DOMContentLoaded",(()=>{const s=new e,i=new t;a.renderTasks(s.getTasks()),a.renderProjects(i.getProjects())}))})();